### 代理模式

#### 定义
为其他对象提供一种代理以控制对这个对象的访问。

#### 结构
 - Proxy: 代理对象，通常具有这些功能：实现与具体的目标对象一样的接口，这样就可以使用代理来代替具体的目标对象。保存一个指向具体目标对象的引用，可以在需要的时候调用具体的目标对象，可以控制对具体目标对象的访问，并可以负责创建和删除它。
 - Sbject: 目标接口，定义代理和具体目标对象的接口，这样就可以在任何使用具体目标对象的地方使用代理对象。
 - RealSubject: 具体的目标对象，真正实现目标接口所要求的功能。

#### 代理模式的功能
 代理模式是通过创建一个代理对象，用这个代理对象去代表真实的对象，客户端得到这个代理对象后，对客户端并没有什么影响，就跟得到了真实对象一样来使用。

#### 代理的分类
 - 虚代理：根据需要来创建开销很大的对象，该对象只有在需要的时候才会被真正创建。
 - 远程代理：用来在不同的地址空间上代表同一个对象。这个不同的地址空间可以是在本机，也可以在其他机器上。
 - copy-on-write代理：在客户端操作的时候，只有对象确实改变了，才会真的拷贝（或克隆）一个目标对象，算是虚代理的一个分支。
 - 保护代理：控制对原始对象的访问，如果有需要，可以给不同的用户提供不同的访问权限，以控制他们对原始对象的访问。
 - Cache代理：为那些昂贵操作的结果提供临时的存储空间，以便多个客户端可以共享这些结果。
 - 防火墙代理：保护对象不被恶意用户访问和操作。
 - 同步代理：使多个用户能够同时访问目标对象而没有冲突。
 - 智能指引：在访问对象时执行一些附加操作，如：对指向实际对象的引用计数、第一次引用一个持久对象时，将它装入内存等。
 

#### Java中的代理
 - 通常把前面自己实现的代理模式称为Java的静态代理，其缺点是如果Subject接口发生变化，那么代理类和具体的目标实现都要变化，不是很灵活。
 - 通常把使用Java内建的对代理模式支持的功能来实现的代理称为Java的动态代理。动态代理实现的时候，虽然Subject接口上定义了很多方法，但是动态代理类始终只有一个invoke方法。这样，当Subject接口发生变化的时候，动态代理的接口就不需要跟着变化了。

Java的动态代理目前只能代理接口，基本的实现是依靠Java的反射机制和动态生成class的技术，来动态生成被代理的接口的实现对象。 
 
 
#### 代理模式的本质
 代理模式的本质：控制对象访问
