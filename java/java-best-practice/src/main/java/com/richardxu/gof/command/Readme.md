### 命令模式(Command)

#### 定义
将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化，对请求排队或记录请求日志，以及支持可撤销的操作。

#### 结构
 - Command: 定义命令的接口，声明执行的方法。
 - ConcreteCommand: 命令接口实现对象，是“虚”的实现；通常会持有接收者，并调用接收者的功能来完成命令要执行的操作。
 - Receiver: 接收者，直接执行命令的对象。任何类都可能成为一个接收者，只要它能够实现命令要求实现的相应功能。
 - Invoker: 要求命令对象执行请求，通常会持有命令对象，可以持有很多的命令对象。这个是客户端真正触发命令并要求命令执行相应操作的地方，也就是说相当于使用命令对象的入口。
 - Client: 创建具体的命令对象，并且设置命令对象的接收者。注意这不是我们常规意义上的客户端，而是在组装命令对象和接收者，或许，把这个Client称为装配者会更好理解，因为真正使用命令的客户端是从Invoker来触发执行。

#### 认识命令模式
**命令模式的关键之处**就是把请求封装成为对象，也就是命令对象，并定义了统一的执行操作的接口，这个命令对象可以被存储、转发、记录、处理、撤销等，整个命令模式都是围绕这个对象在进行。

真正的用户会通过Invoker来触发命令。
在实际开发过程中，Client和Invoker可以融合在一起，由客户在使用命令模式的时候，先进行命令对象和接收者的组装，组装完成后，就可以调用命令执行请求。

**智能命令**：在标准的命令模式里，命令的实现类是没有真正实现命令要求的功能的，真正执行命令的功能的是接收者。如果命令的实现对象比较智能，它自己就能真实地实现命令要求的功能，而不再需要调用接收者，那么这种情况就称为智能命令。

**发布请求的对象和真正实现的对象是解耦的。**

**命令模式的调用顺序示意图**：使用命令模式的过程分为两个阶段，一个阶段是组装命令对象和接收者对象的过程；另外一个阶段是触发调用Invoker，来让命令真正执行的过程。

#### 参数化配置
所谓命令模式的参数化配置，是指：**可以用不同的命令对象，去参数化配置客户的请求**

#### 命令模式的构成
命令模式分为两个重要的部分：
 - 一个部分是Builder接口，这里定义了如何构建各个部件
 - 一个部分是Director，Director知道如何组合来构建产品
 
构建器对象和被构建对象可合并，即内联化(Inline Class)，简单地说就是把构建器对象合并到被构建对象里面去。 
 
### 优缺点
#### 优点
 - 松散耦合：命令模式可以用同一个构建算法构建出表现上完全不同的产品，实现产品构建和产品表现上的分离。
 - 可以很容易地改变产品的内部表示。
 - 更好的复用性：实现了构建算法和具体产品实现的分离。

#### 本质
 命令模式的本质：分离整体构建算法和部件构造。
 
#### 何时选用命令模式
 - 如果创建对象的算法，应该独立于该对象的组成部分以及它们的装配方式时
 - 如果同一个构建过程有着不同的表示时
 
 