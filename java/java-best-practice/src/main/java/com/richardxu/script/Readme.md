## 脚本引擎
一个Java程序可以选择同时包含多种脚本语言的执行引擎，这完全由程序的需求来决定。JSR 223中定义了脚本引擎的注册和查找机制。
Java SE 6中自带了JavaScript语言的脚本引擎，是基于Mozilla的Rhino来实现的，对于其他的脚本语言，则需要下载对应的脚本引擎的库并放到程序的类路径中。

接口javax.script.Bindings定义了语言绑定对象的接口，继承自java.util.Map接口。

另一个重要的接口是javax.script.ScriptContext，其中包含脚本引擎执行过程中的相关上下文信息，可以与Java EE中servlet规范中的javax.servlet.ServletContext接口来进行类比。脚本引擎通过此上下文对象来获取与脚本执行相关的信息，也允许开发人员通过此对象来配置脚本引擎的行为。该上下文对象中主要包含以下3类信息：
- 输入与输出（默认情况下，脚本的输入输出都在标准控制台中，可以通过ScriptContext的setReader、setWriter方法设置脚本执行时的数据输入源和产生错误时出错信息的输出目的）
- 自定义属性（ScriptContext中也有获取和设置属性的方法，即setAttribute和getAttribute，不过ScriptContext中的属性是有作用域之分的。不同作用域的区别在于查找属性时的顺序不同。每个作用域都以一个对应的整数表示其查找顺序。该数值越小，说明查找时的顺序越优先。设置属性时需要显式地指定所在的作用域。脚本执行上下文实现中包含的作用域是固定的，开发人员不能随意定义自己的作用域。通过ScriptContext的getScopes方法可以得到所有可用的作用域列表。两个默认的作用域：ENGINE_SCOPE, GLOBAL_SCOPE）
- 语言绑定对象（语言绑定对象也是与作用域相对应的。同样的作用域优先级顺序对语言绑定对象也适用。这样的优先级顺序会对脚本执行时的变量解析产生影响。）

通过eval方法传递的语言绑定对象，仅在当前eval调用中生效，不会改变引擎默认的语言绑定对象。

### JS引擎使用示例
- 首先创建一个脚本引擎管理器javax.script.ScriptEngineManager对象
- 通过管理器来查找所需的JavaScript脚本引擎
- 最后通过脚本引擎来执行JavaScript代码

### 脚本的编译
当一段脚本需要被多次重复执行时，可以先对脚本进行编译。不是所有的脚本引擎都支持对脚本进行编译。如果脚本引擎支持这一特征，它会实现javax.script.Compilable接口来声明这一点。Java SE中自带的JavaScript脚本引擎是支持对脚本进行编译折。

### 方法调用
有些脚本引擎支持使用者单独调用脚本中的某个方法。支持这种方法调用方式的脚本引擎可以实现javax.script.Invocable接口。通过Invocable接口可以调用脚本中的顶层方法，也可以调用对象中的成员方法。
