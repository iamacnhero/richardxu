## SPI
我们系统里抽象的各个模块，往往有很多不同的实现方案，比如日志模块的方案，xml解析模块、jdbc模块的方案等。面向的对象的设计里，我们一般推荐模块之间基于接口编程，模块之间不对实现类进行硬编码。一旦代码里涉及具体的实现类，就违反了可拔插的原则，如果需要替换一种实现，就需要修改代码。

为了实现在模块装配的时候能不在程序里动态指明，这就需要一种服务发现机制。java spi就是提供这样的一个机制：为某个接口寻找服务实现的机制。有点类似IOC的思想，就是将装配的控制权移到程序之外，在模块化设计中这个机制尤其重要。

Java SPI机制浅谈: <http://singleant.iteye.com/blog/1497259>

JDK提供服务实现查找的一个工具类：
> java.util.ServiceLoader



## ServiceLoader
一个简单的服务提供者加载设施。
通过在资源目录META-INF/services中放置提供者配置文件来标识服务提供者。文件名称是服务类型的完全限定二进制名称。

### 应用场景
我们要装载的实现不在同一个工程里，可能是需要我们动态添加的，这个时候，他们的引入不是编译时候加进来的，是在运行的时候加入的，我们不能像使用普通引入的静态类库那样来使用他们。所以这就是ServiceLoader的优点所在了。

### 具体使用
1. 定义一个服务接口
2. 在META-INF/services目录下放一个接口的全路径文件，文件内容为具体的接口实现类

### 总结
ServiceLoader是一个可以实现动态加载具体实现类的机制，通过它可以实现和具体实现代码的解耦。也可以实现类似于IOC的效果。在jdbc的DriverManager里，就使用了ServiceLoader的特性。对它这种特性的灵活运用可以带来很多代码上实现的简化。它也可以作为一种工厂方法实现的参考。

ServiceLoader跟DriverManager使用总结: <http://www.myexception.cn/program/1355384.html>